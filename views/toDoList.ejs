<%- include("header"); -%>
<div class="container">
    <div class="group">
        <div class="box" id="heading">
            <h3 class="listHeader">Do zrobienia</h3>
        </div>
        <div class="box">
            <% for(var i = 0; i < newItems.length; i++) {  %>

                <form action="/delete" method="post">
                    <div class="item edit">
                        <input class="chbx" type="checkbox" name="chbNew" value=<%= i %> onChange="this.form.submit()">
                        <p class="newItem" contenteditable="true"><%= newItems[i].value %></p>
                    </div>
                </form>
            <% } %>

            <form class="item" action="/" method="post">
                <textarea name="newListItem" placeholder="new list item" ></textarea>
                <button class="todo" type="submit">+</button>
            </form>
        </div>
    </div>

    <div class="group">
        <div class="box" id="heading">
            <h3 class="listHeader">Zrobione</h3>
        </div>

        <div class="box">
            <% for(var k = 0; k < completedItems.length; k++) {  %>
                <form action="/undelete" method="post" >
                    <div class="item">
                        <input type="checkbox" name="chbCompleted" value=<%= k %> onChange="this.form.submit()">
                        <p class="oldItem"><%= completedItems[k].value %></p>
                    </div>
                </form>
            <% } %>
            <div class="item">

            </div>

        </div>
    </div>

</div>

<script>
const tx = document.getElementsByTagName("textarea");
for (let i = 0; i < tx.length; i++) {
  tx[i].setAttribute("style", "height:" + (tx[i].scrollHeight) + "px;overflow-y:hidden;");
  tx[i].addEventListener("input", OnInput, false);
}

function OnInput() {
  this.style.height = 0;
  this.style.height = (this.scrollHeight) + "px";
}

</script>
<%- include("footer"); -%>